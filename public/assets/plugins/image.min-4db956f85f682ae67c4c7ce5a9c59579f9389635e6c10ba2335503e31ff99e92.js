!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):"object"==typeof module&&module.exports?module.exports=function(t,i){return void 0===i&&(i="undefined"!=typeof window?require("jquery"):require("jquery")(t)),e(i)}:e(window.jQuery)}(function(e){e.extend(e.FE.POPUP_TEMPLATES,{"image.insert":"[_BUTTONS_][_UPLOAD_LAYER_][_BY_URL_LAYER_][_PROGRESS_BAR_]","image.edit":"[_BUTTONS_]","image.alt":"[_BUTTONS_][_ALT_LAYER_]","image.size":"[_BUTTONS_][_SIZE_LAYER_]"}),e.extend(e.FE.DEFAULTS,{imageInsertButtons:["imageBack","|","imageUpload","imageByURL"],imageEditButtons:["imageReplace","imageAlign","imageRemove","|","imageLink","linkOpen","linkEdit","linkRemove","-","imageDisplay","imageStyle","imageAlt","imageSize"],imageAltButtons:["imageBack","|"],imageSizeButtons:["imageBack","|"],imageUploadURL:"https://i.froala.com/upload",imageUploadParam:"file",imageUploadParams:{},imageUploadToS3:!1,imageUploadMethod:"POST",imageMaxSize:10485760,imageAllowedTypes:["jpeg","jpg","png","gif","svg+xml"],imageResize:!0,imageResizeWithPercent:!1,imageRoundPercent:!1,imageDefaultWidth:300,imageDefaultAlign:"center",imageDefaultDisplay:"block",imageSplitHTML:!1,imageStyles:{"fr-rounded":"Rounded","fr-bordered":"Bordered"},imageMove:!0,imageMultipleStyles:!0,imageTextNear:!0,imagePaste:!0,imagePasteProcess:!1,imageMinWidth:16,imageOutputSize:!1,imageDefaultMargin:5}),e.FE.PLUGINS.image=function(t){function i(){var e=t.popups.get("image.insert"),i=e.find(".fr-image-by-url-layer input");i.val(""),Ae&&i.val(Ae.attr("src")),i.trigger("change")}function a(){var e=t.$tb.find('.fr-command[data-cmd="insertImage"]'),i=t.popups.get("image.insert");if(i||(i=L()),b(),!i.hasClass("fr-active"))if(t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$tb),e.is(":visible")){var a=e.offset().left+e.outerWidth()/2,s=e.offset().top+(t.opts.toolbarBottom?10:e.outerHeight()-10);t.popups.show("image.insert",a,s,e.outerHeight())}else t.position.forSelection(i),t.popups.show("image.insert")}function s(){var e=t.popups.get("image.edit");if(e||(e=h()),e){t.popups.setContainer("image.edit",t.$sc),t.popups.refresh("image.edit");var i=Ae.offset().left+Ae.outerWidth()/2,a=Ae.offset().top+Ae.outerHeight();t.popups.show("image.edit",i,a,Ae.outerHeight())}}function r(){b()}function n(e){e.hasClass("fr-dii")||e.hasClass("fr-dib")||(e.addClass("fr-fi"+pe(e)[0]),e.addClass("fr-di"+ue(e)[0]),e.css("margin",""),e.css("float",""),e.css("display",""),e.css("z-index",""),e.css("position",""),e.css("overflow",""),e.css("vertical-align",""))}function o(e){de(e,e.hasClass("fr-dib")?"block":e.hasClass("fr-dii")?"inline":null,e.hasClass("fr-fil")?"left":e.hasClass("fr-fir")?"right":pe(e)),e.removeClass("fr-dib fr-dii fr-fir fr-fil")}function l(){for(var i="IMG"==t.el.tagName?[t.el]:t.el.querySelectorAll("img"),a=0;a<i.length;a++){var s=e(i[a]);!t.opts.htmlUntouched&&t.opts.useClasses?((t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&n(s),t.opts.imageTextNear||s.removeClass("fr-dii").addClass("fr-dib")):t.opts.htmlUntouched||t.opts.useClasses||(t.opts.imageEditButtons.indexOf("imageAlign")>=0||t.opts.imageEditButtons.indexOf("imageDisplay")>=0)&&o(s),t.opts.iframe&&s.on("load",t.size.syncIframe)}}function f(i){void 0===i&&(i=!0);var a,s=Array.prototype.slice.call(t.el.querySelectorAll("img")),r=[];for(a=0;a<s.length;a++)r.push(s[a].getAttribute("src")),e(s[a]).toggleClass("fr-draggable",t.opts.imageMove),""===s[a].getAttribute("class")&&s[a].removeAttribute("class"),""===s[a].getAttribute("style")&&s[a].removeAttribute("style");if(Pe)for(a=0;a<Pe.length;a++)r.indexOf(Pe[a].getAttribute("src"))<0&&t.events.trigger("image.removed",[e(Pe[a])]);if(Pe&&i){var n=[];for(a=0;a<Pe.length;a++)n.push(Pe[a].getAttribute("src"));for(a=0;a<s.length;a++)n.indexOf(s[a].getAttribute("src"))<0&&t.events.trigger("image.loaded",[e(s[a])])}Pe=s}function d(){if(De||V(),!Ae)return!1;var e=t.$wp||t.$sc;e.append(De),De.data("instance",t);var i=e.scrollTop()-("static"!=e.css("position")?e.offset().top:0),a=e.scrollLeft()-("static"!=e.css("position")?e.offset().left:0);a-=t.helpers.getPX(e.css("border-left-width")),i-=t.helpers.getPX(e.css("border-top-width")),t.$el.is("img")&&t.$sc.is("body")&&(i=0,a=0),De.css("top",(t.opts.iframe?Ae.offset().top:Ae.offset().top+i)-1).css("left",(t.opts.iframe?Ae.offset().left:Ae.offset().left+a)-1).css("width",Ae.get(0).getBoundingClientRect().width).css("height",Ae.get(0).getBoundingClientRect().height).addClass("fr-active")}function g(e){return'<div class="fr-handler fr-h'+e+'"></div>'}function p(i){if(!t.core.sameInstance(De))return!0;if(i.preventDefault(),i.stopPropagation(),t.$el.find("img.fr-error").left)return!1;t.undo.canDo()||t.undo.saveStep();var a=i.pageX||i.originalEvent.touches[0].pageX;if("mousedown"==i.type){var s=t.$oel.get(0),r=s.ownerDocument,n=r.defaultView||r.parentWindow,o=!1;try{o=n.location!=n.parent.location}catch(e){}o&&n.frameElement&&(a+=t.helpers.getPX(e(n.frameElement).offset().left)+n.frameElement.clientLeft)}Se=e(this),Se.data("start-x",a),Se.data("start-width",Ae.width()),Se.data("start-height",Ae.height());var l=Ae.width();if(t.opts.imageResizeWithPercent){var f=Ae.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;Ae.css("width",(l/e(f).outerWidth()*100).toFixed(2)+"%")}else Ae.css("width",l);Re.show(),t.popups.hideAll(),le()}function u(i){if(!t.core.sameInstance(De))return!0;var a;if(Se&&Ae){if(i.preventDefault(),t.$el.find("img.fr-error").left)return!1;var s=i.pageX||(i.originalEvent.touches?i.originalEvent.touches[0].pageX:null);if(!s)return!1;var r=Se.data("start-x"),n=s-r,o=Se.data("start-width");if((Se.hasClass("fr-hnw")||Se.hasClass("fr-hsw"))&&(n=0-n),t.opts.imageResizeWithPercent){var l=Ae.parentsUntil(t.$el,t.html.blockTagsQuery()).get(0)||t.el;o=((o+n)/e(l).outerWidth()*100).toFixed(2),t.opts.imageRoundPercent&&(o=Math.round(o)),Ae.css("width",o+"%"),a=(t.helpers.getPX(Ae.css("width"))/e(l).outerWidth()*100).toFixed(2),a!==o&&Ae.css("width",a+"%"),Ae.css("height","").removeAttr("height")}else o+n>=t.opts.imageMinWidth&&Ae.css("width",o+n),a=t.helpers.getPX(Ae.css("width")),a!==o+n&&Ae.css("width",a),(Ae.attr("style")||"").match(/(^height:)|(; *height:)/)&&Ae.css("height",Se.data("start-height")*Ae.width()/Se.data("start-width"));d(),t.events.trigger("image.resize",[Ee()])}}function c(e){if(!t.core.sameInstance(De))return!0;if(Se&&Ae){if(e&&e.stopPropagation(),t.$el.find("img.fr-error").left)return!1;Se=null,Re.hide(),d(),s(),t.undo.saveStep(),t.events.trigger("image.resizeEnd",[Ee()])}}function m(e,i,a){t.edit.on(),Ae&&Ae.addClass("fr-error"),w(t.language.translate("Something went wrong. Please try again.")),!Ae&&a&&Q(a),t.events.trigger("image.error",[{code:e,message:Oe[e]},i,a])}function h(e){if(e)return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Ae&&t.popups.isVisible("image.edit")&&(t.events.disableBlur(),C(Ae))}),!0;var i="";if(t.opts.imageEditButtons.length>0){i+='<div class="fr-buttons">',i+=t.button.buildList(t.opts.imageEditButtons),i+="</div>";var a={buttons:i};return t.popups.create("image.edit",a)}return!1}function v(e){var i=t.popups.get("image.insert");if(i||(i=L()),i.find(".fr-layer.fr-active").removeClass("fr-active").addClass("fr-pactive"),i.find(".fr-image-progress-bar-layer").addClass("fr-active"),i.find(".fr-buttons").hide(),Ae){t.popups.setContainer("image.insert",t.$sc);var a=Ae.offset().left+Ae.width()/2,s=Ae.offset().top+Ae.height();t.popups.show("image.insert",a,s,Ae.outerHeight())}void 0===e&&y(t.language.translate("Uploading"),0)}function b(e){var i=t.popups.get("image.insert");if(i&&(i.find(".fr-layer.fr-pactive").addClass("fr-active").removeClass("fr-pactive"),i.find(".fr-image-progress-bar-layer").removeClass("fr-active"),i.find(".fr-buttons").show(),e||t.$el.find("img.fr-error").length)){if(t.events.focus(),t.$el.find("img.fr-error").length&&(t.$el.find("img.fr-error").remove(),t.undo.saveStep(),t.undo.run(),t.undo.dropRedo()),!t.$wp&&Ae){var a=Ae;ne(!0),t.selection.setAfter(a.get(0)),t.selection.restore()}t.popups.hide("image.insert")}}function y(e,i){var a=t.popups.get("image.insert");if(a){var s=a.find(".fr-image-progress-bar-layer");s.find("h3").text(e+(i?" "+i+"%":"")),s.removeClass("fr-error"),i?(s.find("div").removeClass("fr-indeterminate"),s.find("div > span").css("width",i+"%")):s.find("div").addClass("fr-indeterminate")}}function w(e){v();var i=t.popups.get("image.insert"),a=i.find(".fr-image-progress-bar-layer");a.addClass("fr-error");var s=a.find("h3");s.text(e),t.events.disableBlur(),s.focus()}function E(){var e=t.popups.get("image.insert"),i=e.find(".fr-image-by-url-layer input");i.val().length>0&&(v(),y(t.language.translate("Loading image")),D(i.val(),!0,[],Ae),i.val(""),i.blur())}function C(e){re.call(e.get(0))}function A(){var i=e(this);t.popups.hide("image.insert"),i.removeClass("fr-uploading"),i.next().is("br")&&i.next().remove(),C(i),t.events.trigger("image.loaded",[i])}function D(e,i,a,s,r){t.edit.off(),y(t.language.translate("Loading image")),i&&(e=t.helpers.sanitizeURL(e));var n=new Image;n.onload=function(){var i,n;if(s){t.undo.canDo()||s.hasClass("fr-uploading")||t.undo.saveStep();var o=s.data("fr-old-src");s.data("fr-image-pasted")&&(o=null),t.$wp?(i=s.clone().removeData("fr-old-src").removeClass("fr-uploading").removeAttr("data-fr-image-pasted"),i.off("load"),o&&s.attr("src",o),s.replaceWith(i)):i=s;for(var l=i.get(0).attributes,d=0;d<l.length;d++){var g=l[d];0===g.nodeName.indexOf("data-")&&i.removeAttr(g.nodeName)}if(void 0!==a)for(n in a)a.hasOwnProperty(n)&&"link"!=n&&i.attr("data-"+n,a[n]);i.on("load",A),i.attr("src",e),t.edit.on(),f(!1),t.undo.saveStep(),t.$el.blur(),t.events.trigger(o?"image.replaced":"image.inserted",[i,r])}else i=k(e,a,A),f(!1),t.undo.saveStep(),t.events.trigger("image.inserted",[i,r])},n.onerror=function(){m($e)},v(t.language.translate("Loading image")),n.src=e}function S(e){try{if(!1===t.events.trigger("image.uploaded",[e],!0))return t.edit.on(),!1;var i=JSON.parse(e);return i.link?i:(m(Ie,e),!1)}catch(t){return m(Ue,e),!1}}function R(i){try{var a=e(i).find("Location").text(),s=e(i).find("Key").text();return!1===t.events.trigger("image.uploadedToS3",[a,s,i],!0)?(t.edit.on(),!1):a}catch(e){return m(Ue,i),!1}}function x(e){y(t.language.translate("Loading image"));var i=this.status,a=this.response,s=this.responseXML,r=this.responseText;try{if(t.opts.imageUploadToS3)if(201==i){var n=R(s);n&&D(n,!1,[],e,a||s)}else m(Ue,a||s,e);else if(i>=200&&i<300){var o=S(r);o&&D(o.link,!1,o,e,a||r)}else m(ke,a||r,e)}catch(t){m(Ue,a||r,e)}}function $(){m(Ue,this.response||this.responseText||this.responseXML)}function I(e){if(e.lengthComputable){var i=e.loaded/e.total*100|0;y(t.language.translate("Uploading"),i)}}function k(i,a,s){var r,n="";if(a&&void 0!==a)for(r in a)a.hasOwnProperty(r)&&"link"!=r&&(n+=" data-"+r+'="'+a[r]+'"');var o=t.opts.imageDefaultWidth;o&&"auto"!=o&&(o+=t.opts.imageResizeWithPercent?"%":"px");var l=e('<img src="'+i+'"'+n+(o?' style="width: '+o+';"':"")+">");de(l,t.opts.imageDefaultDisplay,t.opts.imageDefaultAlign),l.on("load",s),t.edit.on(),t.events.focus(!0),t.selection.restore(),t.undo.saveStep(),t.opts.imageSplitHTML?t.markers.split():t.markers.insert();var f=t.$el.find(".fr-marker");return f.length?(f.parent().is("hr")&&f.parent().after(f),t.node.isLastSibling(f)&&f.parent().hasClass("fr-deletable")&&f.insertAfter(f.parent()),f.replaceWith(l)):t.$el.append(l),t.html.wrap(),t.selection.clear(),l}function U(){t.edit.on(),b(!0)}function B(i,a,s,r){function n(){var s=e(this);s.off("load"),s.addClass("fr-uploading"),s.next().is("br")&&s.next().remove(),t.placeholder.refresh(),s.is(r)||C(s),d(),v(),t.edit.off(),i.onload=function(){x.call(i,s)},i.onerror=$,i.upload.onprogress=I,i.onabort=U,s.off("abortUpload").on("abortUpload",function(){4!=i.readyState&&i.abort()}),i.send(a)}var o,l=new FileReader;l.addEventListener("load",function(){var e=l.result;if(l.result.indexOf("svg+xml")<0){for(var i=atob(l.result.split(",")[1]),a=[],s=0;s<i.length;s++)a.push(i.charCodeAt(s));e=window.URL.createObjectURL(new Blob([new Uint8Array(a)],{type:"image/jpeg"}))}r?(r.on("load",n),t.edit.on(),t.undo.saveStep(),r.data("fr-old-src",r.attr("src")),r.attr("src",e)):o=k(e,null,n)},!1),l.readAsDataURL(s)}function F(e,i){if(void 0!==e&&e.length>0){if(!1===t.events.trigger("image.beforeUpload",[e]))return!1;var a=e[0];if(a.name||(a.name=(new Date).getTime()+".jpg"),a.size>t.opts.imageMaxSize)return m(Be),!1;if(t.opts.imageAllowedTypes.indexOf(a.type.replace(/image\//g,""))<0)return m(Fe),!1;var s;if(t.drag_support.formdata&&(s=t.drag_support.formdata?new FormData:null),s){var r;if(!1!==t.opts.imageUploadToS3){s.append("key",t.opts.imageUploadToS3.keyStart+(new Date).getTime()+"-"+(a.name||"untitled")),s.append("success_action_status","201"),s.append("X-Requested-With","xhr"),s.append("Content-Type",a.type);for(r in t.opts.imageUploadToS3.params)t.opts.imageUploadToS3.params.hasOwnProperty(r)&&s.append(r,t.opts.imageUploadToS3.params[r])}for(r in t.opts.imageUploadParams)t.opts.imageUploadParams.hasOwnProperty(r)&&s.append(r,t.opts.imageUploadParams[r]);s.append(t.opts.imageUploadParam,a,a.name);var n=t.opts.imageUploadURL;t.opts.imageUploadToS3&&(n=t.opts.imageUploadToS3.uploadURL?t.opts.imageUploadToS3.uploadURL:"https://"+t.opts.imageUploadToS3.region+".amazonaws.com/"+t.opts.imageUploadToS3.bucket),B(t.core.getXHR(n,t.opts.imageUploadMethod),s,a,i||Ae)}}}function O(i){t.events.$on(i,"dragover dragenter",".fr-image-upload-layer",function(){return e(this).addClass("fr-drop"),!1}),t.events.$on(i,"dragleave dragend",".fr-image-upload-layer",function(){return e(this).removeClass("fr-drop"),!1}),t.events.$on(i,"drop",".fr-image-upload-layer",function(a){a.preventDefault(),a.stopPropagation(),e(this).removeClass("fr-drop");var s=a.originalEvent.dataTransfer;if(s&&s.files){var r=i.data("instance")||t;r.events.disableBlur(),r.image.upload(s.files),r.events.enableBlur()}}),t.helpers.isIOS()&&t.events.$on(i,"touchend",'.fr-image-upload-layer input[type="file"]',function(){e(this).trigger("click")}),t.events.$on(i,"change",'.fr-image-upload-layer input[type="file"]',function(){if(this.files){var a=i.data("instance")||t;a.events.disableBlur(),i.find("input:focus").blur(),a.events.enableBlur(),a.image.upload(this.files)}e(this).val("")})}function P(i){var a=i.originalEvent.dataTransfer;if(a&&a.files&&a.files.length){var s=a.files[0];if(s&&s.type&&-1!==s.type.indexOf("image")){t.markers.remove(),t.markers.insertAtPoint(i.originalEvent),t.$el.find(".fr-marker").replaceWith(e.FE.MARKERS),0===t.$el.find(".fr-marker").length&&t.selection.setAtEnd(t.el),t.popups.hideAll();var r=t.popups.get("image.insert");r||(r=L()),t.popups.setContainer("image.insert",t.$sc);var n=i.originalEvent.pageX,o=i.originalEvent.pageY;return t.opts.iframe&&(o+=t.$iframe.offset().top,n+=t.$iframe.offset().left),t.popups.show("image.insert",n,o),v(),t.opts.imageAllowedTypes.indexOf(s.type.replace(/image\//g,""))>=0?(ne(!0),F(a.files)):m(Fe),i.preventDefault(),i.stopPropagation(),!1}}}function T(){t.events.$on(t.$el,t._mousedown,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(i){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;t.helpers.isMobile()||t.selection.clear(),xe=!0,t.popups.areVisible()&&t.events.disableBlur(),t.browser.msie&&(t.events.disableBlur(),t.$el.attr("contenteditable",!1)),t.draggable||"touchstart"==i.type||i.preventDefault(),i.stopPropagation()}),t.events.$on(t.$el,t._mouseup,"IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(i){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;xe&&(xe=!1,i.stopPropagation(),t.browser.msie&&(t.$el.attr("contenteditable",!0),t.events.enableBlur()))}),t.events.on("keyup",function(i){if(i.shiftKey&&""===t.selection.text().replace(/\n/g,"")){var a=t.selection.element(),s=t.selection.endElement();a&&"IMG"==a.tagName?C(e(a)):s&&"IMG"==s.tagName&&C(e(s))}},!0),t.events.on("drop",P),t.events.on("mousedown window.mousedown",oe),t.events.on("window.touchmove",le),t.events.on("mouseup window.mouseup",function(){if(Ae)return ne(),!1;le()}),t.events.on("commands.mousedown",function(e){e.parents(".fr-toolbar").length>0&&ne()}),t.events.on("blur image.hideResizer commands.undo commands.redo element.dropped",function(){xe=!1,ne(!0)}),t.events.on("modals.hide",function(){Ae&&(ye(),t.selection.clear())})}function L(e){if(e)return t.popups.onRefresh("image.insert",i),t.popups.onHide("image.insert",r),!0;var a,s="";t.opts.imageInsertButtons.length>1&&(s='<div class="fr-buttons">'+t.button.buildList(t.opts.imageInsertButtons)+"</div>");var n=t.opts.imageInsertButtons.indexOf("imageUpload"),o=t.opts.imageInsertButtons.indexOf("imageByURL"),l="";n>=0&&(a=" fr-active",o>=0&&n>o&&(a=""),l='<div class="fr-image-upload-layer'+a+' fr-layer" id="fr-image-upload-layer-'+t.id+'"><strong>'+t.language.translate("Drop image")+"</strong><br>("+t.language.translate("or click")+')<div class="fr-form"><input type="file" accept="image/'+t.opts.imageAllowedTypes.join(", image/").toLowerCase()+'" tabIndex="-1" aria-labelledby="fr-image-upload-layer-'+t.id+'" role="button"></div></div>');var f="";o>=0&&(a=" fr-active",n>=0&&o>n&&(a=""),f='<div class="fr-image-by-url-layer'+a+' fr-layer" id="fr-image-by-url-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-by-url-layer-text-'+t.id+'" type="text" placeholder="http://" tabIndex="1" aria-required="true"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageInsertByURL" tabIndex="2" role="button">'+t.language.translate("Insert")+"</button></div></div>");var d='<div class="fr-image-progress-bar-layer fr-layer"><h3 tabIndex="-1" class="fr-message">Uploading</h3><div class="fr-loader"><span class="fr-progress"></span></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-dismiss" data-cmd="imageDismissError" tabIndex="2" role="button">OK</button></div></div>',g={buttons:s,upload_layer:l,by_url_layer:f,progress_bar:d},p=t.popups.create("image.insert",g);return t.$wp&&t.events.$on(t.$wp,"scroll",function(){Ae&&t.popups.isVisible("image.insert")&&be()}),O(p),p}function z(){Ae&&t.popups.get("image.alt").find("input").val(Ae.attr("alt")||"").trigger("change")}function M(){var e=t.popups.get("image.alt");e||(e=N()),b(),t.popups.refresh("image.alt"),t.popups.setContainer("image.alt",t.$sc);var i=Ae.offset().left+Ae.width()/2,a=Ae.offset().top+Ae.height();t.popups.show("image.alt",i,a,Ae.outerHeight())}function N(e){if(e)return t.popups.onRefresh("image.alt",z),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageAltButtons)+"</div>";var a="";a='<div class="fr-image-alt-layer fr-layer fr-active" id="fr-image-alt-layer-'+t.id+'"><div class="fr-input-line"><input id="fr-image-alt-layer-text-'+t.id+'" type="text" placeholder="'+t.language.translate("Alternate Text")+'" tabIndex="1"></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetAlt" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var s={buttons:i,alt_layer:a},r=t.popups.create("image.alt",s);return t.$wp&&t.events.$on(t.$wp,"scroll.image-alt",function(){Ae&&t.popups.isVisible("image.alt")&&M()}),r}function _(e){if(Ae){var i=t.popups.get("image.alt");Ae.attr("alt",e||i.find("input").val()||""),i.find("input:focus").blur(),C(Ae)}}function K(){if(Ae){var e=t.popups.get("image.size");e.find('input[name="width"]').val(Ae.get(0).style.width).trigger("change"),e.find('input[name="height"]').val(Ae.get(0).style.height).trigger("change")}}function W(){var e=t.popups.get("image.size");e||(e=Y()),b(),t.popups.refresh("image.size"),t.popups.setContainer("image.size",t.$sc);var i=Ae.offset().left+Ae.width()/2,a=Ae.offset().top+Ae.height();t.popups.show("image.size",i,a,Ae.outerHeight())}function Y(e){if(e)return t.popups.onRefresh("image.size",K),!0;var i="";i='<div class="fr-buttons">'+t.button.buildList(t.opts.imageSizeButtons)+"</div>";var a="";a='<div class="fr-image-size-layer fr-layer fr-active" id="fr-image-size-layer-'+t.id+'"><div class="fr-image-group"><div class="fr-input-line"><input id="fr-image-size-layer-width-'+t.id+'" type="text" name="width" placeholder="'+t.language.translate("Width")+'" tabIndex="1"></div><div class="fr-input-line"><input id="fr-image-size-layer-height'+t.id+'" type="text" name="height" placeholder="'+t.language.translate("Height")+'" tabIndex="1"></div></div><div class="fr-action-buttons"><button type="button" class="fr-command fr-submit" data-cmd="imageSetSize" tabIndex="2" role="button">'+t.language.translate("Update")+"</button></div></div>";var s={buttons:i,size_layer:a},r=t.popups.create("image.size",s);return t.$wp&&t.events.$on(t.$wp,"scroll.image-size",function(){Ae&&t.popups.isVisible("image.size")&&W()}),r}function H(e,i){if(Ae){var a=t.popups.get("image.size");e=e||a.find('input[name="width"]').val()||"",i=i||a.find('input[name="height"]').val()||"";var s=/^[\d]+((px)|%)*$/g;e.match(s)?Ae.css("width",e):Ae.css("width",""),i.match(s)?Ae.css("height",i):Ae.css("height",""),a.find("input:focus").blur(),C(Ae)}}function X(e){var i,a,s=t.popups.get("image.insert");if(Ae||t.opts.toolbarInline)Ae&&(a=Ae.offset().top+Ae.outerHeight());else{var r=t.$tb.find('.fr-command[data-cmd="insertImage"]');i=r.offset().left+r.outerWidth()/2,a=r.offset().top+(t.opts.toolbarBottom?10:r.outerHeight()-10)}!Ae&&t.opts.toolbarInline&&(a=s.offset().top-t.helpers.getPX(s.css("margin-top")),s.hasClass("fr-above")&&(a+=s.outerHeight())),s.find(".fr-layer").removeClass("fr-active"),s.find(".fr-"+e+"-layer").addClass("fr-active"),t.popups.show("image.insert",i,a,Ae?Ae.outerHeight():0),t.accessibility.focusPopup(s)}function j(e){t.popups.get("image.insert").find(".fr-image-upload-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function G(e){t.popups.get("image.insert").find(".fr-image-by-url-layer").hasClass("fr-active")&&e.addClass("fr-active").attr("aria-pressed",!0)}function q(e,t,i,a){return e.pageX=t,p.call(this,e),e.pageX=e.pageX+i*Math.floor(Math.pow(1.1,a)),u.call(this,e),c.call(this,e),++a}function V(){var i;if(t.shared.$image_resizer?(De=t.shared.$image_resizer,Re=t.shared.$img_overlay,t.events.on("destroy",function(){De.removeClass("fr-active").appendTo(e("body:first"))},!0)):(t.shared.$image_resizer=e('<div class="fr-image-resizer"></div>'),De=t.shared.$image_resizer,t.events.$on(De,"mousedown",function(e){e.stopPropagation()},!0),t.opts.imageResize&&(De.append(g("nw")+g("ne")+g("sw")+g("se")),t.shared.$img_overlay=e('<div class="fr-image-overlay"></div>'),Re=t.shared.$img_overlay,i=De.get(0).ownerDocument,e(i).find("body:first").append(Re))),t.events.on("shared.destroy",function(){De.html("").removeData().remove(),De=null,t.opts.imageResize&&(Re.remove(),Re=null)},!0),t.helpers.isMobile()||t.events.$on(e(t.o_win),"resize",function(){Ae&&!Ae.hasClass("fr-uploading")?ne(!0):Ae&&(d(),be(),v(!1))}),t.opts.imageResize){i=De.get(0).ownerDocument,t.events.$on(De,t._mousedown,".fr-handler",p),t.events.$on(e(i),t._mousemove,u),t.events.$on(e(i.defaultView||i.parentWindow),t._mouseup,c),t.events.$on(Re,"mouseleave",c);var a=1,s=null,r=0;t.events.on("keydown",function(i){if(Ae){var n=-1!=navigator.userAgent.indexOf("Mac OS X")?i.metaKey:i.ctrlKey,o=i.which;(o!==s||i.timeStamp-r>200)&&(a=1),(o==e.FE.KEYCODE.EQUALS||t.browser.mozilla&&o==e.FE.KEYCODE.FF_EQUALS)&&n&&!i.altKey?a=q.call(this,i,1,1,a):(o==e.FE.KEYCODE.HYPHEN||t.browser.mozilla&&o==e.FE.KEYCODE.FF_HYPHEN)&&n&&!i.altKey?a=q.call(this,i,2,-1,a):t.keys.ctrlKey(i)||o!=e.FE.KEYCODE.ENTER||(Ae.before("<br>"),C(Ae)),s=o,r=i.timeStamp}},!0),t.events.on("keyup",function(){a=1})}}function Q(i){(i=i||Ae)&&!1!==t.events.trigger("image.beforeRemove",[i])&&(t.popups.hideAll(),ye(),ne(!0),t.undo.canDo()||t.undo.saveStep(),i.get(0)==t.el?i.removeAttr("src"):("A"==i.get(0).parentNode.tagName?(t.selection.setBefore(i.get(0).parentNode)||t.selection.setAfter(i.get(0).parentNode)||i.parent().after(e.FE.MARKERS),e(i.get(0).parentNode).remove()):(t.selection.setBefore(i.get(0))||t.selection.setAfter(i.get(0))||i.after(e.FE.MARKERS),i.remove()),t.html.fillEmptyBlocks(),t.selection.restore()),t.undo.saveStep())}function J(i){var a=i.which;if(Ae&&(a==e.FE.KEYCODE.BACKSPACE||a==e.FE.KEYCODE.DELETE))return i.preventDefault(),i.stopPropagation(),Q(),!1;if(Ae&&a==e.FE.KEYCODE.ESC){var s=Ae;return ne(!0),t.selection.setAfter(s.get(0)),t.selection.restore(),i.preventDefault(),!1}if(Ae&&(a==e.FE.KEYCODE.ARROW_LEFT||a==e.FE.KEYCODE.ARROW_RIGHT)){var r=Ae.get(0);return ne(!0),a==e.FE.KEYCODE.ARROW_LEFT?t.selection.setBefore(r):t.selection.setAfter(r),t.selection.restore(),i.preventDefault(),!1}return Ae&&a!=e.FE.KEYCODE.F10&&!t.keys.isBrowserAction(i)?(i.preventDefault(),i.stopPropagation(),!1):void 0}function Z(e){if(e&&"IMG"==e.tagName)t.node.hasClass(e,"fr-uploading")||t.node.hasClass(e,"fr-error")?e.parentNode.removeChild(e):t.node.hasClass(e,"fr-draggable")&&e.classList.remove("fr-draggable");else if(e&&e.nodeType==Node.ELEMENT_NODE)for(var i=e.querySelectorAll("img.fr-uploading, img.fr-error, img.fr-draggable"),a=0;a<i.length;a++)Z(i[a])}function ee(){if(T(),"IMG"==t.el.tagName&&t.$el.addClass("fr-view"),t.events.$on(t.$el,t.helpers.isMobile()&&!t.helpers.isWindowsPhone()?"touchend":"click","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',re),t.helpers.isMobile()&&(t.events.$on(t.$el,"touchstart","IMG"==t.el.tagName?null:'img:not([contenteditable="false"])',function(){Te=!1}),t.events.$on(t.$el,"touchmove",function(){Te=!0})),t.$wp?(t.events.on("window.keydown keydown",J,!0),t.events.on("keyup",function(t){if(Ae&&t.which==e.FE.KEYCODE.ENTER)return!1},!0)):t.events.$on(t.$win,"keydown",J),t.events.on("toolbar.esc",function(){if(Ae){if(t.$wp)t.events.disableBlur(),t.events.focus();else{var e=Ae;ne(!0),t.selection.setAfter(e.get(0)),t.selection.restore()}return!1}},!0),t.events.on("toolbar.focusEditor",function(){if(Ae)return!1},!0),t.events.on("window.cut window.copy",function(e){Ae&&t.popups.isVisible("image.edit")&&!t.popups.get("image.edit").find(":focus").length&&(ye(),t.paste.saveCopiedText(Ae.get(0).outerHTML,"\n"),"copy"==e.type?setTimeout(function(){C(Ae)}):(ne(!0),t.undo.saveStep(),setTimeout(function(){t.undo.saveStep()},0)))},!0),t.browser.msie&&t.events.on("keydown",function(i){if(!t.selection.isCollapsed()||!Ae)return!0;var a=i.which;a==e.FE.KEYCODE.C&&t.keys.ctrlKey(i)?t.events.trigger("window.copy"):a==e.FE.KEYCODE.X&&t.keys.ctrlKey(i)&&t.events.trigger("window.cut")}),t.events.$on(e(t.o_win),"keydown",function(t){var i=t.which;if(Ae&&i==e.FE.KEYCODE.BACKSPACE)return t.preventDefault(),!1}),t.events.$on(t.$win,"keydown",function(t){var i=t.which;Ae&&Ae.hasClass("fr-uploading")&&i==e.FE.KEYCODE.ESC&&Ae.trigger("abortUpload")}),t.events.on("destroy",function(){Ae&&Ae.hasClass("fr-uploading")&&Ae.trigger("abortUpload")}),t.events.on("paste.before",ae),t.events.on("paste.beforeCleanup",se),t.events.on("paste.after",ie),t.events.on("html.set",l),t.events.on("html.inserted",l),l(),t.events.on("destroy",function(){Pe=[]}),t.events.on("html.processGet",Z),t.opts.imageOutputSize){var i;t.events.on("html.beforeGet",function(){i=t.el.querySelectorAll("img");for(var a=0;a<i.length;a++){var s=i[a].style.width||e(i[a]).width(),r=i[a].style.height||e(i[a]).height();s&&i[a].setAttribute("width",(""+s).replace(/px/,"")),r&&i[a].setAttribute("height",(""+r).replace(/px/,""))}})}t.opts.iframe&&t.events.on("image.loaded",t.size.syncIframe),t.$wp&&(f(),t.events.on("contentChanged",f)),t.events.$on(e(t.o_win),"orientationchange.image",function(){setTimeout(function(){Ae&&C(Ae)},100)}),h(!0),L(!0),Y(!0),N(!0),t.events.on("node.remove",function(e){if("IMG"==e.get(0).tagName)return Q(e),!1})}function te(i){if(!1===t.events.trigger("image.beforePasteUpload",[i]))return!1;Ae=e(i),d(),s(),be(),v(),t.edit.off();for(var a=atob(e(i).attr("src").split(",")[1]),r=[],n=0;n<a.length;n++)r.push(a.charCodeAt(n));F([new Blob([new Uint8Array(r)],{type:"image/jpeg"})],Ae)}function ie(){t.opts.imagePaste?t.$el.find("img[data-fr-image-pasted]").each(function(i,a){if(t.opts.imagePasteProcess){var s=t.opts.imageDefaultWidth;s&&"auto"!=s&&(s+=t.opts.imageResizeWithPercent?"%":"px"),e(a).css("width",s).removeClass("fr-dii fr-dib fr-fir fr-fil").addClass((t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:""))}if(0===a.src.indexOf("data:"))te(a);else if(0===a.src.indexOf("blob:")){var r=new Image;r.crossOrigin="Anonymous",r.onload=function(){var e=t.o_doc.createElement("CANVAS"),i=e.getContext("2d");e.height=this.naturalHeight,e.width=this.naturalWidth,i.drawImage(this,0,0),a.src=e.toDataURL("image/png"),te(a)},r.src=a.src}else 0!==a.src.indexOf("http")||0===a.src.indexOf("https://mail.google.com/mail")?(t.selection.save(),e(a).remove(),t.selection.restore()):e(a).removeAttr("data-fr-image-pasted")}):t.$el.find("img[data-fr-image-pasted]").remove()}function ae(e){if(e&&e.clipboardData&&e.clipboardData.items&&e.clipboardData.items[0]){var i=e.clipboardData.items[0].getAsFile();if(i){var a=new FileReader;return a.onload=function(e){var i=e.target.result,a=t.opts.imageDefaultWidth;a&&"auto"!=a&&(a+=t.opts.imageResizeWithPercent?"%":"px"),t.html.insert('<img data-fr-image-pasted="true" class="'+(t.opts.imageDefaultDisplay?"fr-di"+t.opts.imageDefaultDisplay[0]:"")+(t.opts.imageDefaultAlign&&"center"!=t.opts.imageDefaultAlign?" fr-fi"+t.opts.imageDefaultAlign[0]:"")+'" src="'+i+'"'+(a?' style="width: '+a+';"':"")+">"),t.events.trigger("paste.after")},a.readAsDataURL(i),!1}}}function se(e){return e=e.replace(/<img /gi,'<img data-fr-image-pasted="true" ')}function re(i){if("false"==e(this).parents("[contenteditable]:not(.fr-element):not(body):first").attr("contenteditable"))return!0;if(i&&"touchend"==i.type&&Te)return!0;if(i&&t.edit.isDisabled())return i.stopPropagation(),i.preventDefault(),!1;for(var a=0;a<e.FE.INSTANCES.length;a++)e.FE.INSTANCES[a]!=t&&e.FE.INSTANCES[a].events.trigger("image.hideResizer");t.toolbar.disable(),i&&(i.stopPropagation(),i.preventDefault()),t.helpers.isMobile()&&(t.events.disableBlur(),t.$el.blur(),t.events.enableBlur()),t.opts.iframe&&t.size.syncIframe(),Ae=e(this),t.browser.msie||ye(),d(),s(),t.browser.msie||t.selection.clear(),t.helpers.isIOS()&&(t.events.disableBlur(),t.$el.blur()),t.button.bulkRefresh(),t.events.trigger("video.hideResizer")}function ne(e){Ae&&(fe()||!0===e)&&(t.toolbar.enable(),De.removeClass("fr-active"),t.popups.hide("image.edit"),Ae=null,le())}function oe(){Le=!0}function le(){Le=!1}function fe(){return Le}function de(e,i,a){!t.opts.htmlUntouched&&t.opts.useClasses?(e.removeClass("fr-fil fr-fir fr-dib fr-dii"),a&&e.addClass("fr-fi"+a[0]),i&&e.addClass("fr-di"+i[0])):"inline"==i?(e.css({display:"inline-block",verticalAlign:"bottom",margin:t.opts.imageDefaultMargin}),"center"==a?e.css({"float":"none",marginBottom:"",marginTop:"",maxWidth:"calc(100% - "+2*t.opts.imageDefaultMargin+"px)"}):"left"==a?e.css({"float":"left",marginLeft:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"}):e.css({"float":"right",marginRight:0,maxWidth:"calc(100% - "+t.opts.imageDefaultMargin+"px)"})):"block"==i&&(e.css({display:"block","float":"none",verticalAlign:"top",margin:t.opts.imageDefaultMargin+"px auto"}),"left"==a?e.css({marginLeft:0}):"right"==a&&e.css({marginRight:0}))}function ge(e){Ae.removeClass("fr-fir fr-fil"),!t.opts.htmlUntouched&&t.opts.useClasses?"left"==e?Ae.addClass("fr-fil"):"right"==e&&Ae.addClass("fr-fir"):de(Ae,ue(),e),ye(),d(),s(),t.selection.clear()}function pe(e){if(void 0===e&&(e=Ae),e){if(e.hasClass("fr-fil"))return"left";if(e.hasClass("fr-fir"))return"right";if(e.hasClass("fr-dib")||e.hasClass("fr-dii"))return"center";var t=e.css("float");if(e.css("float","none"),"block"==e.css("display")){if(e.css("float",""),e.css("float")!=t&&e.css("float",t),0===parseInt(e.css("margin-left"),10))return"left";if(0===parseInt(e.css("margin-right"),10))return"right"}else{if(e.css("float",""),e.css("float")!=t&&e.css("float",t),"left"==e.css("float"))return"left";if("right"==e.css("float"))return"right"}}return"center"}function ue(e){void 0===e&&(e=Ae);var t=e.css("float");return e.css("float","none"),"block"==e.css("display")?(e.css("float",""),e.css("float")!=t&&e.css("float",t),"block"):(e.css("float",""),e.css("float")!=t&&e.css("float",t),"inline")}function ce(e){Ae&&e.find("> *:first").replaceWith(t.icon.create("image-align-"+pe()))}function me(e,t){
Ae&&t.find('.fr-command[data-param1="'+pe()+'"]').addClass("fr-active").attr("aria-selected",!0)}function he(e){Ae.removeClass("fr-dii fr-dib"),!t.opts.htmlUntouched&&t.opts.useClasses?"inline"==e?Ae.addClass("fr-dii"):"block"==e&&Ae.addClass("fr-dib"):de(Ae,e,pe()),ye(),d(),s(),t.selection.clear()}function ve(e,t){Ae&&t.find('.fr-command[data-param1="'+ue()+'"]').addClass("fr-active").attr("aria-selected",!0)}function be(){var e=t.popups.get("image.insert");e||(e=L()),t.popups.isVisible("image.insert")||(b(),t.popups.refresh("image.insert"),t.popups.setContainer("image.insert",t.$sc));var i=Ae.offset().left+Ae.width()/2,a=Ae.offset().top+Ae.height();t.popups.show("image.insert",i,a,Ae.outerHeight())}function ye(){if(Ae){t.selection.clear();var e=t.doc.createRange();e.selectNode(Ae.get(0)),t.selection.get().addRange(e)}}function we(){Ae?(t.events.disableBlur(),e(".fr-popup input:focus").blur(),C(Ae)):(t.events.disableBlur(),t.selection.restore(),t.events.enableBlur(),t.popups.hide("image.insert"),t.toolbar.showInline())}function Ee(){return Ae}function Ce(e,i,a){if(void 0===i&&(i=t.opts.imageStyles),void 0===a&&(a=t.opts.imageMultipleStyles),!Ae)return!1;if(!a){var s=Object.keys(i);s.splice(s.indexOf(e),1),Ae.removeClass(s.join(" "))}"object"==typeof i[e]?(Ae.removeAttr("style"),Ae.css(i[e].style)):Ae.toggleClass(e),C(Ae)}var Ae,De,Se,Re,xe=!1,$e=1,Ie=2,ke=3,Ue=4,Be=5,Fe=6,Oe={};Oe[$e]="Image cannot be loaded from the passed link.",Oe[Ie]="No link in upload response.",Oe[ke]="Error during file upload.",Oe[Ue]="Parsing response failed.",Oe[Be]="File is too large.",Oe[Fe]="Image file type is invalid.",Oe[7]="Files can be uploaded only to same domain in IE 8 and IE 9.";var Pe,Te,Le=!1;return{_init:ee,showInsertPopup:a,showLayer:X,refreshUploadButton:j,refreshByURLButton:G,upload:F,insertByURL:E,align:ge,refreshAlign:ce,refreshAlignOnShow:me,display:he,refreshDisplayOnShow:ve,replace:be,back:we,get:Ee,insert:D,showProgressBar:v,remove:Q,hideProgressBar:b,applyStyle:Ce,showAltPopup:M,showSizePopup:W,setAlt:_,setSize:H,exitEdit:ne,edit:C}},e.FE.DefineIcon("insertImage",{NAME:"image"}),e.FE.RegisterShortcut(e.FE.KEYCODE.P,"insertImage",null,"P"),e.FE.RegisterCommand("insertImage",{title:"Insert Image",undo:!1,focus:!0,refreshAfterCallback:!1,popup:!0,callback:function(){this.popups.isVisible("image.insert")?(this.$el.find(".fr-marker").length&&(this.events.disableBlur(),this.selection.restore()),this.popups.hide("image.insert")):this.image.showInsertPopup()},plugin:"image"}),e.FE.DefineIcon("imageUpload",{NAME:"upload"}),e.FE.RegisterCommand("imageUpload",{title:"Upload Image",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-upload")},refresh:function(e){this.image.refreshUploadButton(e)}}),e.FE.DefineIcon("imageByURL",{NAME:"link"}),e.FE.RegisterCommand("imageByURL",{title:"By URL",undo:!1,focus:!1,toggle:!0,callback:function(){this.image.showLayer("image-by-url")},refresh:function(e){this.image.refreshByURLButton(e)}}),e.FE.RegisterCommand("imageInsertByURL",{title:"Insert Image",undo:!0,refreshAfterCallback:!1,callback:function(){this.image.insertByURL()},refresh:function(e){this.image.get()?e.text(this.language.translate("Replace")):e.text(this.language.translate("Insert"))}}),e.FE.DefineIcon("imageDisplay",{NAME:"star"}),e.FE.RegisterCommand("imageDisplay",{title:"Display",type:"dropdown",options:{inline:"Inline",block:"Break Text"},callback:function(e,t){this.image.display(t)},refresh:function(e){this.opts.imageTextNear||e.addClass("fr-hidden")},refreshOnShow:function(e,t){this.image.refreshDisplayOnShow(e,t)}}),e.FE.DefineIcon("image-align",{NAME:"align-left"}),e.FE.DefineIcon("image-align-left",{NAME:"align-left"}),e.FE.DefineIcon("image-align-right",{NAME:"align-right"}),e.FE.DefineIcon("image-align-center",{NAME:"align-justify"}),e.FE.DefineIcon("imageAlign",{NAME:"align-justify"}),e.FE.RegisterCommand("imageAlign",{type:"dropdown",title:"Align",options:{left:"Align Left",center:"None",right:"Align Right"},html:function(){var t='<ul class="fr-dropdown-list" role="presentation">',i=e.FE.COMMANDS.imageAlign.options;for(var a in i)i.hasOwnProperty(a)&&(t+='<li role="presentation"><a class="fr-command fr-title" tabIndex="-1" role="option" data-cmd="imageAlign" data-param1="'+a+'" title="'+this.language.translate(i[a])+'">'+this.icon.create("image-align-"+a)+'<span class="fr-sr-only">'+this.language.translate(i[a])+"</span></a></li>");return t+="</ul>"},callback:function(e,t){this.image.align(t)},refresh:function(e){this.image.refreshAlign(e)},refreshOnShow:function(e,t){this.image.refreshAlignOnShow(e,t)}}),e.FE.DefineIcon("imageReplace",{NAME:"exchange"}),e.FE.RegisterCommand("imageReplace",{title:"Replace",undo:!1,focus:!1,popup:!0,refreshAfterCallback:!1,callback:function(){this.image.replace()}}),e.FE.DefineIcon("imageRemove",{NAME:"trash"}),e.FE.RegisterCommand("imageRemove",{title:"Remove",callback:function(){this.image.remove()}}),e.FE.DefineIcon("imageBack",{NAME:"arrow-left"}),e.FE.RegisterCommand("imageBack",{title:"Back",undo:!1,focus:!1,back:!0,callback:function(){this.image.back()},refresh:function(e){this.image.get()||this.opts.toolbarInline?(e.removeClass("fr-hidden"),e.next(".fr-separator").removeClass("fr-hidden")):(e.addClass("fr-hidden"),e.next(".fr-separator").addClass("fr-hidden"))}}),e.FE.RegisterCommand("imageDismissError",{title:"OK",undo:!1,callback:function(){this.image.hideProgressBar(!0)}}),e.FE.DefineIcon("imageStyle",{NAME:"magic"}),e.FE.RegisterCommand("imageStyle",{title:"Style",type:"dropdown",html:function(){var e='<ul class="fr-dropdown-list" role="presentation">',t=this.opts.imageStyles;for(var i in t)if(t.hasOwnProperty(i)){var a=t[i];"object"==typeof a&&(a=a.title),e+='<li role="presentation"><a class="fr-command" tabIndex="-1" role="option" data-cmd="imageStyle" data-param1="'+i+'">'+this.language.translate(a)+"</a></li>"}return e+="</ul>"},callback:function(e,t){this.image.applyStyle(t)},refreshOnShow:function(t,i){var a=this.image.get();a&&i.find(".fr-command").each(function(){var t=e(this).data("param1"),i=a.hasClass(t);e(this).toggleClass("fr-active",i).attr("aria-selected",i)})}}),e.FE.DefineIcon("imageAlt",{NAME:"info"}),e.FE.RegisterCommand("imageAlt",{undo:!1,focus:!1,popup:!0,title:"Alternate Text",callback:function(){this.image.showAltPopup()}}),e.FE.RegisterCommand("imageSetAlt",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setAlt()}}),e.FE.DefineIcon("imageSize",{NAME:"arrows-alt"}),e.FE.RegisterCommand("imageSize",{undo:!1,focus:!1,popup:!0,title:"Change Size",callback:function(){this.image.showSizePopup()}}),e.FE.RegisterCommand("imageSetSize",{undo:!0,focus:!1,title:"Update",refreshAfterCallback:!1,callback:function(){this.image.setSize()}})});